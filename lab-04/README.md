# Лабораторная работа №4: Принципы объектно-ориентированного программирования

## Описание

Данная лабораторная работа представляет собой разработку комплексной системы управления компанией и её сотрудниками с применением всех четырех основных принципов объектно-ориентированного программирования:

1. **Инкапсуляция** - скрытие внутреннего состояния и взаимодействие через контролируемый интерфейс
2. **Наследование** - создание иерархии классов с переиспользованием функциональности
3. **Полиморфизм** - способность объектов различных типов выполнять одинаковые операции по-разному
4. **Композиция/Агрегация** - построение сложных систем из простых компонентов

## Структура проекта

```
project_root/
├── src/                          # Исходный код системы
│   ├── base/                     # Базовые классы (Part 1-2)
│   │   ├── __init__.py
│   │   ├── employee.py           # Employee - корневой класс (инкапсуляция)
│   │   ├── abstract_employee.py  # AbstractEmployee - интерфейс (наследование)
│   │   └── exceptions.py         # Кастомные исключения
│   │
│   ├── specialists/              # Специализированные сотрудники (Part 2)
│   │   ├── __init__.py
│   │   ├── manager.py            # Manager - менеджер с бонусом
│   │   ├── developer.py          # Developer - разработчик (уровень + стек)
│   │   ├── salesperson.py        # Salesperson - продавец (комиссия)
│   │   └── ordinary_employee.py  # OrdinaryEmployee - штатный сотрудник
│   │
│   ├── organization/             # Управление структурами (Part 3-4)
│   │   ├── __init__.py
│   │   ├── department.py         # Department - коллекция сотрудников (полиморфизм)
│   │   ├── project.py            # Project - проект с командой (композиция)
│   │   └── company.py            # Company - фасад системы (агрегация)
│   │
│   ├── factory.py                # EmployeeFactory - фабрика создания сотрудников
│   └── utils/                    # Вспомогательные модули
│       └── comparators.py        # Функции сортировки
│
├── examples/                     # Примеры и тесты (Part 1-4)
│   ├── test_part1.py             # Тесты инкапсуляции
│   ├── test_part2.py             # Тесты наследования
│   ├── test_part3.py             # Тесты полиморфизма
│   └── test_part4.py             # Тесты композиции
│
├── main.py                       # Test Runner - запуск всех частей
├── README.md                     # Документация
└── docs/                         # Документация и отчеты
    ├── json/                     # JSON файлы для сериализации
    └── csv/                      # CSV экспорты
```

## Реализованные концепции

### Part 1: Инкапсуляция
- **Employee** - базовый класс с приватными атрибутами (`__id`, `__name`, `__department`, `__base_salary`)
- **Properties** - @property/@setter для контролируемого доступа
- **Валидация** - проверка данных при установке значений
- **35+ тестов** - проверка создания, валидации и операторов

### Part 2: Наследование и абстракция
- **AbstractEmployee** - ABC интерфейс со спецификацией методов
- **4 типа сотрудников:**
  - **Manager** - базовая + бонус
  - **Developer** - базовая × уровень (junior: 1.0, middle: 1.5, senior: 2.0)
  - **Salesperson** - базовая + (продажи × комиссия)
  - **OrdinaryEmployee** - базовая без модификаций
- **EmployeeFactory** - фабрика для создания сотрудников
- **30+ тестов** - проверка расчетов и полиморфизма

### Part 3: Полиморфизм и магические методы
- **Department** - контейнер для сотрудников с полиморфным поведением
- **Магические методы:**
  - `__len__()` - количество сотрудников
  - `__iter__()` - итерация по сотрудникам
  - `__getitem__()` - доступ по индексу
  - `__contains__()` - проверка вхождения
  - `__lt__()` - сравнение по зарплате
  - `__add__()` - сложение зарплат
  - `__radd__()` - поддержка sum()
- **Сериализация** - сохранение в JSON и загрузка
- **25+ тестов** - проверка всех магических методов

### Part 4: Композиция и агрегация
- **Project** (Композиция) - проект содержит уникальную команду
- **Company** (Агрегация) - компания управляет отделами и проектами
- **Система валидации:**
  - `DuplicateIdError` - дублирование ID
  - `DependencyError` - нарушение целостности
  - `InvalidStatusError` - неверный статус
  - `EmployeeNotFoundError` - сотрудник не найден
- **Полная сериализация** - JSON с восстановлением связей
- **CSV экспорт** - отчеты по сотрудникам
- **25+ тестов** - проверка целостности данных

## Использование

### Базовый пример

```python
from src.specialists.developer import Developer
from src.organization.department import Department

# Создание разработчика
dev = Developer(1, "Alice", "IT", 5000, "senior", ["Python", "Go"])
print(dev.calculate_salary())  # 10000

# Создание отдела
dept = Department("Development")
dept.add_employee(dev)

# Работа с коллекцией
print(len(dept))           # 1
print(sum(dept))           # 10000
for emp in dept:
    print(emp)
```

### Использование Factory

```python
from src.factory import EmployeeFactory

emp = EmployeeFactory.create_employee(
    "salesperson",
    emp_id=1,
    name="Bob",
    department="Sales",
    base_salary=4000,
    commission_rate=0.1,
    sales_volume=50000
)
print(emp.calculate_salary())  # 9000
```

### Работа с Company

```python
from src.organization.company import Company

company = Company("MegaCorp")
dept = Department("IT")
company.add_department(dept)

# Сохранение
company.save_to_json("company.json")

# Загрузка
loaded = Company.load_from_json("company.json")
```

## Запуск тестов

```bash
# Все части
python main.py tests all

# Конкретная часть
python main.py tests part1     # Инкапсуляция
python main.py tests part2     # Наследование
python main.py tests part3     # Полиморфизм
python main.py tests part4     # Композиция

# С покрытием
python main.py tests coverage

# Демонстрация
python main.py demo
```

## Результаты тестирования

| Part | Описание | Тестов | Статус |
|------|----------|--------|--------|
| 1 | Инкапсуляция | 35+ | ✅ PASSED |
| 2 | Наследование | 30+ | ✅ PASSED |
| 3 | Полиморфизм | 25+ | ✅ PASSED |
| 4 | Композиция | 25+ | ✅ PASSED |
| **Итого** | — | **115+** | **✅ 100%** |

## Требования

- Python 3.8+
- Стандартная библиотека Python (json, csv, abc)
- pytest (для запуска тестов)

## Ключевые особенности

✅ **Полная инкапсуляция** - приватные атрибуты с properties и валидацией  
✅ **Правильная иерархия** - AbstractEmployee с переопределением методов  
✅ **Магические методы** - полная поддержка операций Python  
✅ **Целостность данных** - система валидации и исключений  
✅ **Сериализация** - полное сохранение и восстановление состояния  
✅ **Комплексное тестирование** - 115+ тестов с 85%+ покрытием  

## Архитектурные решения

1. **Разделение на пакеты** - base/, specialists/, organization/ для логического разделения
2. **Абстрактные интерфейсы** - использование ABC для гарантии контракта
3. **Фабричный метод** - централизованное создание объектов
4. **Система исключений** - специализированные исключения для разных ошибок
5. **Сохранение идентификаторов** - при сериализации Project хранит только ID

## Возможности развития

- Интеграция с веб-фреймворком (Flask/Django)
- Добавление базы данных (SQL/NoSQL)
- REST API для управления системой
- Пользовательский веб-интерфейс
- Расширенная система отчетности
- Импорт/экспорт из Excel

---

**Автор:** [ФИО]  
**Группа:** [Номер]  
**Дата:** 17.12.2025  
**Статус:** ✅ ВЫПОЛНЕНА
