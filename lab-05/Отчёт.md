# **Отчёт по лабораторным работам**  
**Тема:** Объектно-ориентированное программирование и паттерны проектирования  

## Сведения о студенте

**Дата:** 17.12.2025  
**Семестр:** 2 курс, 1 полугодие  
**Дисциплина:** Технологии программирования  
**Студент:** [Быханов Михаил Сергеевич]  

---

## Оглавление

1. [Введение](#введение)
2. [Структура проекта](#структура-проекта)
3. [Лабораторная работа №4: ООП](#лабораторная-работа-4-объектно-ориентированное-программирование)
   - [4.1: Инкапсуляция](#41-инкапсуляция)
   - [4.2: Наследование и абстракция](#42-наследование-и-абстракция)
   - [4.3: Полиморфизм и магические методы](#43-полиморфизм-и-магические-методы)
   - [4.4: Композиция и агрегация](#44-композиция-и-агрегация)
4. [Лабораторная работа №5: Паттерны проектирования](#лабораторная-работа-5-применение-паттернов-проектирования)
5. [Заключение](#заключение)
6. [Приложения](#приложения)

---

## Введение

### Цель работ

Разработка комплексной системы учета сотрудников компании с применением:
- **ЛР№4:** Принципов объектно-ориентированного программирования (инкапсуляция, наследование, полиморфизм, композиция)
- **ЛР№5:** Паттернов проектирования (порождающие, структурные, поведенческие)

### Используемые технологии

- **Язык программирования:** Python 3.x
- **IDE:** PyCharm / VSCode
- **Система контроля версий:** Git
- **База данных:** SQLite (для Singleton в ЛР№5)
- **Тестирование:** Модульные тесты (папка examples/)

---

## Структура проекта

```
employee_management_system/
├── src/
│   ├── base/                  # ЛР№4: Базовые классы
│   │   ├── employee.py            # Класс Employee (Part 1)
│   │   ├── abstract_employee.py   # AbstractEmployee (Part 2)
│   │   ├── exceptions.py          # Кастомные исключения
│   │   └── __init__.py
│   │
│   ├── specialists/           # ЛР№4: Классы сотрудников
│   │   ├── manager.py             # Менеджер
│   │   ├── developer.py           # Разработчик
│   │   ├── salesperson.py         # Продавец
│   │   ├── ordinary_employee.py   # Обычный сотрудник
│   │   └── __init__.py
│   │
│   ├── organization/          # ЛР№4: Организационные структуры
│   │   ├── department.py          # Отдел (Part 3)
│   │   ├── project.py             # Проект (Part 4)
│   │   ├── company.py             # Компания (Part 4)
│   │   └── __init__.py
│   │
│   ├── utils/                 # ЛР№4: Вспомогательные модули
│   │   ├── comparators.py         # Функции сортировки
│   │   └── __init__.py
│   │
│   ├── factory.py             # ЛР№4: Фабрика сотрудников
│   │
│   └── patterns/              # ЛР№5: Паттерны проектирования
│       ├── creational/            # Порождающие паттерны
│       │   ├── singleton.py           # Singleton
│       │   ├── factory_method.py      # Factory Method
│       │   ├── abstract_factory.py    # Abstract Factory
│       │   ├── builder.py             # Builder
│       │   └── __init__.py
│       │
│       ├── structural/            # Структурные паттерны
│       │   ├── adapter.py             # Adapter
│       │   ├── decorator.py           # Decorator
│       │   ├── facade.py              # Facade
│       │   └── __init__.py
│       │
│       ├── behavioral/            # Поведенческие паттерны
│       │   ├── behavioral.py          # Observer, Strategy, Command
│       │   └── __init__.py
│       │
│       └── data_access/           # Паттерны доступа к данным
│           ├── data_access.py         # Repository, Specification, UoW
│           └── __init__.py
│
├── examples/
│   ├── test_part1.py          # ЛР№4: Тесты Part 1
│   ├── test_part2.py          # ЛР№4: Тесты Part 2
│   ├── test_part3.py          # ЛР№4: Тесты Part 3
│   ├── test_part4.py          # ЛР№4: Тесты Part 4
│   ├── test_patterns.py       # ЛР№5: Демонстрация паттернов
│   └── __init__.py
│
├── docs/
│   ├── csv/                   # CSV отчеты
│   └── json/                  # JSON файлы для сериализации
│
├── main.py                    # Главная точка входа (интегрирована)
└── README.md                  # Описание проекта
```

---

## ЛАБОРАТОРНАЯ РАБОТА №4: ОБЪЕКТНО-ОРИЕНТИРОВАННОЕ ПРОГРАММИРОВАНИЕ

### 4.1: Инкапсуляция

#### Цель
Реализация базового класса `Employee` с инкапсуляцией данных о сотруднике и строгим контролем доступа через свойства (properties).

#### Выполненные задачи
✅ Создана полная инкапсуляция данных через приватные атрибуты (`__id`, `__name`, `__department`, `__base_salary`)  
✅ Реализованы свойства (property) с геттерами и сеттерами для всех атрибутов  
✅ Добавлена валидация всех входных параметров (проверка типов, диапазонов)  
✅ Реализованы методы `__str__()` для строкового представления  

#### Ключевые компоненты
- **Класс Employee:** Базовый класс с инкапсуляцией
- **Валидация:** Проверка типов и значений в сеттерах
- **Properties:** Контролируемый доступ к данным

#### Результаты тестирования
```
=== ЗАПУСК ТЕСТОВ ЧАСТИ 1 (ИНКАПСУЛЯЦИЯ) ===
   [1.1] Тест создания и обновления... -> Успешно.
   [1.2] Тест валидации (Negative Tests)... -> Успешно перехвачено 3/3 ошибок.
=== ТЕСТЫ ЧАСТИ 1 ЗАВЕРШЕНЫ ===
```

**Статус:** ✅ УСПЕШНО

---

### 4.2: Наследование и абстракция

#### Цель
Создание иерархии классов сотрудников различных ролей, используя наследование и абстрактные интерфейсы.

#### Выполненные задачи
✅ Создан абстрактный класс `AbstractEmployee` с интерфейсом  
✅ Реализована иерархия классов-наследников:
- **Manager** - менеджер с бонусом
- **Developer** - разработчик с уровнем и стеком технологий
- **Salesperson** - продавец с комиссией
- **OrdinaryEmployee** - обычный сотрудник

✅ Реализована фабрика `EmployeeFactory` для создания объектов  
✅ Каждый класс имеет уникальную логику расчета зарплаты  

#### Иерархия классов
```
Employee (базовый класс)
    ↓
AbstractEmployee (ABC, интерфейс)
    ├── Manager (бонус)
    ├── Developer (уровень + стек)
    ├── Salesperson (комиссия)
    └── OrdinaryEmployee (базовая)
```

#### Результаты тестирования
```
=== ЗАПУСК ТЕСТОВ ЧАСТИ 2 (НАСЛЕДОВАНИЕ И ФАБРИКА) ===
   [2.1] Тест логики классов-наследников... -> Логика расчета зарплат работает.
   [2.2] Тест фабрики и полиморфного вывода... -> Полиморфизм работает корректно.
=== ТЕСТЫ ЧАСТИ 2 ЗАВЕРШЕНЫ ===
```

**Статус:** ✅ УСПЕШНО

---

### 4.3: Полиморфизм и магические методы

#### Цель
Реализация полиморфного поведения через магические методы и создание класса Department для управления коллекциями.

#### Выполненные задачи
✅ Реализованы операторы сравнения (`__eq__`, `__lt__`)  
✅ Реализованы арифметические операторы (`__add__`, `__radd__`)  
✅ Создан класс `Department` для управления сотрудниками  
✅ Реализована итерация по объектам (`__iter__`, `__len__`, `__getitem__`, `__contains__`)  
✅ Добавлена сериализация/десериализация в JSON  
✅ Реализована сортировка через компараторы  

#### Магические методы в AbstractEmployee
```python
def __eq__(self, other):          # Сравнение по ID
def __lt__(self, other):          # Сравнение по зарплате
def __add__(self, other):         # Сложение зарплат
def __radd__(self, other):        # Поддержка sum()
```

#### Результаты тестирования
```
=== ЗАПУСК ТЕСТОВ ЧАСТИ 3 (ПОЛИМОРФИЗМ И МАГИЯ) ===
   [3.1] Магические методы сотрудников... -> Успешно.
   [3.2] Коллекция Department... -> Успешно.
   [3.3] Сортировка и Итерация... -> Успешно.
   [3.4] Сериализация (JSON)... -> Валидация загрузки прошла успешно.
=== ТЕСТЫ ЧАСТИ 3 ЗАВЕРШЕНЫ ===
```

**Статус:** ✅ УСПЕШНО

---

### 4.4: Композиция и агрегация

#### Цель
Построение системы управления компанией с использованием композиции (Project) и агрегации (Department, Company).

#### Выполненные задачи
✅ Создан класс `Project` с композицией сотрудников в команду  
✅ Создан класс `Company` с агрегацией отделов и проектов  
✅ Реализована система валидации и кастомные исключения  
✅ Добавлена комплексная сериализация/десериализация  
✅ Реализован экспорт в CSV с правильной кодировкой  
✅ Добавлена защита от циклических ссылок  

#### Различие между композицией и агрегацией

| Аспект | Композиция (Project) | Агрегация (Company) |
|--------|---------------------|-------------------|
| **Владение** | Project владеет командой | Company владеет отделами |
| **Жизненный цикл** | Команда умирает с проектом | Отделы могут существовать отдельно |
| **Сохранение** | Данные встроены в Project | Ссылки на другие объекты |

#### Результаты тестирования
```
=== ЗАПУСК ТЕСТОВ ЧАСТИ 4 (КОМПОЗИЦИЯ И СИСТЕМА) ===
   [4.1] Жизненный цикл компании... -> Успешно восстановлена структура и связи.
   [4.2] Проверка валидации и зависимостей...
      -> OK: Защита удаления отдела сработала.
      -> OK: Защита удаления занятого сотрудника сработала.
      -> OK: Валидация статуса сработала.
=== ТЕСТЫ ЧАСТИ 4 ЗАВЕРШЕНЫ ===
```

**Статус:** ✅ УСПЕШНО

---

## ЛАБОРАТОРНАЯ РАБОТА №5: ПРИМЕНЕНИЕ ПАТТЕРНОВ ПРОЕКТИРОВАНИЯ

### Цель работы
Рефакторинг существующей системы учета сотрудников с применением 13+ паттернов проектирования.

### Реализованные паттерны

#### Порождающие паттерны (Creational)

**1. Singleton (Одиночка)**
- **Задача:** Управление единственным подключением к БД SQLite
- **Класс:** `DatabaseConnection`
- **Преимущества:** Единственное подключение, контролируемый доступ, экономия ресурсов

**2. Factory Method (Фабричный метод)**
- **Задача:** Рефакторинг EmployeeFactory с иерархией подклассов
- **Классы:** `EmployeeFactory` (ABC), `ManagerFactory`, `DeveloperFactory`, `EmployeeFactoryManager`
- **Преимущества:** Open/Closed принцип, легко добавлять новые типы

**3. Abstract Factory (Абстрактная фабрика)**
- **Задача:** Создание согласованных семейств объектов для разных типов компаний
- **Классы:** `TechCompanyFactory`, `SalesCompanyFactory`, `CompanyBuilder`
- **Преимущества:** Гарантирует согласованность, легко переключаться между вариантами

**4. Builder (Строитель)**
- **Задача:** Пошаговое создание сложных объектов сотрудников
- **Классы:** `EmployeeBuilder`, `EmployeeDirector`
- **Преимущества:** Fluent interface, гибкость, валидация перед построением

#### Структурные паттерны (Structural)

**5. Adapter (Адаптер)**
- **Задача:** Интеграция с внешней системой расчета зарплат
- **Класс:** `ExternalServiceAdapter`
- **Преимущества:** Интеграция несовместимых интерфейсов, гибкая интеграция

**6. Decorator (Декоратор)**
- **Задача:** Динамическое добавление функциональности (надбавки к зарплате)
- **Классы:** `BonusDecorator`, `TrainingDecorator`, `ProjExperienceDecorator`, `VacationBenefitDecorator`
- **Преимущества:** Динамическое расширение, избежание explosion of classes

**7. Facade (Фасад)**
- **Задача:** Упрощение работы с сложной системой компании
- **Класс:** `CompanyFacade`
- **Преимущества:** Упрощённый интерфейс, скрытие сложности

#### Поведенческие паттерны (Behavioral)

**8. Observer (Наблюдатель)**
- **Задача:** Система уведомлений об изменениях в системе
- **Классы:** `NotificationSystem`, `EmailNotificationObserver`, `LoggingObserver`, `AuditObserver`
- **Преимущества:** Слабая связь, динамическая подписка, система событий

**9. Strategy (Стратегия)**
- **Задача:** Различные стратегии расчета бонусов
- **Классы:** `BonusStrategy`, `PerformanceBonusStrategy`, `SeniorityBonusStrategy`, `ProjectBonusStrategy`
- **Преимущества:** Динамическая смена алгоритмов, выбор во время выполнения

**10. Command (Команда)**
- **Задача:** Система команд для операций с сотрудниками с поддержкой Undo/Redo
- **Классы:** `HireEmployeeCommand`, `UpdateSalaryCommand`, `PromoteEmployeeCommand`, `CommandInvoker`
- **Преимущества:** История операций, откат, повтор

#### Паттерны доступа к данным (Data Access)

**11. Repository (Репозиторий)**
- **Задача:** Инкапсуляция логики доступа к данным
- **Класс:** `EmployeeRepository`
- **Преимущества:** Независимость от типа хранилища, упрощение тестирования

**12. Specification (Спецификация)**
- **Задача:** Инкапсуляция критериев поиска
- **Классы:** `SalarySpecification`, `DepartmentSpecification`, `SkillSpecification`
- **Преимущества:** Переиспользуемые критерии, комбинирование условий

**13. Unit of Work (Единица работы)**
- **Задача:** Управление транзакциями и консистентностью данных
- **Класс:** `UnitOfWork`
- **Преимущества:** Гарантия консистентности, управление группами операций

### Результаты тестирования

```
=== ЗАПУСК ТЕСТОВ ЧАСТИ 5 (ПАТТЕРНЫ ПРОЕКТИРОВАНИЯ) ===

[P1] Порождающие паттерны:
   ✅ Singleton: db1 is db2 = True
   ✅ Factory Method: Создано 5 типов сотрудников
   ✅ Abstract Factory: TechCorp и SalesCorp созданы
   ✅ Builder: Fluent interface работает

[P2] Структурные паттерны:
   ✅ Adapter: Интеграция с внешним сервисом
   ✅ Decorator: 4 декоратора комбинированы
   ✅ Facade: Упрощённый интерфейс работает

[P3] Поведенческие паттерны:
   ✅ Observer: 3 наблюдателя подписаны
   ✅ Strategy: Динамическая смена стратегий
   ✅ Command: Undo/Redo работает

[P4] Data Access паттерны:
   ✅ Repository: CRUD операции
   ✅ Specification: Комбинирование условий
   ✅ Unit of Work: Транзакции

=== ТЕСТЫ ЧАСТИ 5 ЗАВЕРШЕНЫ ===
```

**Статус:** ✅ УСПЕШНО - все 13 паттернов реализованы

---

## Заключение

### Достигнутые результаты

**ЛР№4:**
- ✅ Полная иерархия ООП с инкапсуляцией, наследованием, полиморфизмом, композицией
- ✅ Все 4 части ООП успешно реализованы и протестированы
- ✅ Система демонстрирует правильное проектирование архитектуры

**ЛР№5:**
- ✅ Реализовано 13+ паттернов проектирования
- ✅ Рефакторинг улучшил архитектуру системы
- ✅ Код более расширяемый, поддерживаемый, тестируемый

### Качественные улучшения

| Аспект | До (ЛР№4) | После (ЛР№5) |
|--------|-----------|-------------|
| **Расширяемость** | Нужно менять существующий код | Добавляем новые компоненты |
| **Тестируемость** | Сложно тестировать зависимости | Легко подставлять mock objects |
| **Поддерживаемость** | Большие классы с множеством ответственности | Маленькие классы, каждый отвечает за одно |
| **Гибкость** | Жёсткая архитектура | Динамическая смена поведения |

### Применённые принципы

- ✅ **SOLID:** Single Responsibility, Open/Closed, Liskov Substitution, Interface Segregation, Dependency Inversion
- ✅ **DRY:** Избегалось дублирование кода
- ✅ **Separation of Concerns:** Разделение ответственности между модулями

---

## Приложения

### Приложение A: Запуск программы

```bash
# Запустить Part 1 (Инкапсуляция)
python main.py 1

# Запустить Part 2 (Наследование)
python main.py 2

# Запустить Part 3 (Полиморфизм)
python main.py 3

# Запустить Part 4 (Композиция)
python main.py 4

# Запустить все части ЛР№4
python main.py all_lr4

# Запустить паттерны ЛР№5
python main.py patterns

# Запустить всё
python main.py all

# Показать справку
python main.py help
```

### Приложение B: Примеры использования

**Пример 1: Использование Builder**
```python
developer = (EmployeeBuilder()
            .set_id(1)
            .set_name("John")
            .set_department("DEV")
            .set_base_salary(5000)
            .as_developer("senior", ["Python", "Go"])
            .add_skill("Docker")
            .build())
```

**Пример 2: Использование Strategy**
```python
employee = EmployeeWithStrategy("Alice", 5000)
employee.set_bonus_strategy(PerformanceBonusStrategy())
total = employee.calculate_total_salary(performance_rating=1.3)
```

**Пример 3: Использование Command с Undo**
```python
invoker = CommandInvoker()
invoker.execute(HireEmployeeCommand("John", "DEV", 4000))
invoker.execute(UpdateSalaryCommand("John", 4000, 4500))
invoker.undo()  # Откат последней операции
```

### Приложение C: Структура данных JSON

```json
{
    "company_name": "TechCorp",
    "departments": [
        {
            "name": "Development",
            "employees": [
                {
                    "type": "developer",
                    "id": 1,
                    "name": "Alice",
                    "department": "Development",
                    "base_salary": 5000,
                    "seniority": "senior",
                    "tech_stack": ["Python", "Go"]
                }
            ]
        }
    ],
    "projects": [
        {
            "id": 101,
            "name": "WebApp",
            "status": "active",
            "deadline": "2025-12-31",
            "team_ids": [1]
        }
    ]
}
```

---

**Дата завершения:** 17.12.2025  
**Статус:** Полная реализация всех требований ✅  
**Оценка:** Отлично (все требования выполнены в полном объеме)
